<div class="content-wrapper">
    <section class="content">
        <div class="box">
            <div class="box-header with-border">
                <h3 class="box-title">{{viewOptions.title | translate }}</h3>
                <button (click)="typeView = 1"
                        type="button" class="btn btn-box-tool">
                        <i class="fa fa-list fa-lg text-blue"></i>
                </button>

                <button (click)="typeView = 2"
                        type="button" class="btn btn-box-tool">
                    <i class="fa fa-list-alt fa-lg text-blue"></i>
                </button>


                <div class="pull-right" *ngIf="viewOptions['buttons'].length > 0">
                    <button *ngFor="let buttom of getViewOptionsButtons()"
                            class="{{buttom.class}}" type="button" data-toggle="modal"
                            [attr.data-target]="'#'+buttom.modal">
                        <i class="{{buttom.icon}}"></i>
                        {{buttom.title | translate}}
                    </button>
                </div>

            </div>
            <!-- /.box-header -->
            <div *ngIf="permissions.list" class="box-body">
                <div *ngIf="typeView==1">
                    <table class="table table-striped table-hover tarjeta">
                        <thead>
                        <tr>
                            <th>Cliente</th>
                            <th>Placa</th>
                            <th>TAG RFID</th>
                            <th>Fecha de entrada</th>
                            <th>Fecha de salida</th>
                            <th>Peso E.</th>
                            <th>Peso S.</th>
                            <th>Neto</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let data of dataList.list">
                            <td>
                                <a class="btn btn-box-tool"
                                   (click)="goTaquilla($event,data.companyId)">
                                    {{data.companyName}}<br/>({{data.companyRUC}})
                                    <i class="fa fa-external-link"></i>
                                </a>
                            </td>
                            <td>{{data.vehiclePlate}}</td>
                            <td>{{data.vehicleTagRFID}}</td>
                            <td>{{formatDate(data.dateIn,'DD/MM/YYYY, LT')}}</td>
                            <td>{{formatDate(data.dateOut,'DD/MM/YYYY, LT')}}</td>
                            <td>{{data.weightIn | number:'.0-3'}}</td>
                            <td>{{data.weightOut | number:'.0-3'}}</td>
                            <td>{{(data.weightIn - data.weightOut) | number:'.0-3'}}</td>
                            <td>
                                <a (click)="cargarData($event,data)" data-toggle="modal" data-target="#operacionManual2" >
                                    <i class="fa fa-sign-in fa-lg"></i>
                                </a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <div *ngIf="typeView==2">
                    <div class="panel-group" id="accordion">
                        <div *ngFor="let data of dataList.list" class="panel panel-default">
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a data-toggle="collapse" data-parent="#accordion" [attr.href]="'#collapse'+data.id">
                                        Entrada:&nbsp;{{formatDate(data.dateIn,'DD/MM/YYYY, LT')}}&nbsp;-&nbsp;
                                        Salida:&nbsp;{{formatDate(data.dateOut,'DD/MM/YYYY, LT')}}&nbsp;-&nbsp;
                                        Tag:&nbsp;{{data.vehicleTagRFID}}&nbsp;-&nbsp;
                                        Placa:&nbsp;{{data.vehiclePlate}}&nbsp;-&nbsp;
                                    </a>
                                </h4>
                            </div>
                            <div [attr.id]="'collapse'+data.id" class="panel-collapse collapse">
                                <div class="panel-body">
                                    <table class="table table-hover tarjeta">
                                        <tbody>
                                            <tr>
                                                <td>Cliente</td>
                                                <td>
                                                    <a class="btn btn-box-tool"
                                                       (click)="goTaquilla($event,data.companyId)">
                                                        {{data.companyName}}, RUC:({{data.companyRUC}})
                                                        <i class="fa fa-external-link"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Placa</td>
                                                <td>{{data.vehiclePlate}}</td>
                                            </tr>
                                            <tr>
                                                <td>Tag RFID</td>
                                                <td>{{data.vehicleTagRFID}}</td>
                                            </tr>
                                            <tr>
                                                <td>Entrada</td>
                                                <td>{{formatDate(data.dateIn,'DD/MM/YYYY, LT')}}</td>
                                            </tr>
                                            <tr>
                                                <td>Salida</td>
                                                <td>{{formatDate(data.dateOut,'DD/MM/YYYY, LT')}}</td>
                                            </tr>
                                            <tr>
                                                <td>Peso de entrada</td>
                                                <td>{{data.weightIn | number:'.0-3'}}</td>
                                            </tr>
                                            <tr>
                                                <td>Peso de salida</td>
                                                <td>{{data.weightOut | number:'.0-3'}}</td>
                                            </tr>
                                            <tr>
                                                <td>Neto</td>
                                                <td>{{(data.weightIn - data.weightOut) | number:'.0-3'}}</td>
                                            </tr>
                                            <tr>
                                                <td colspan="2">Cargar&nbsp;
                                                    <a (click)="cargarData($event,data)" data-toggle="modal" data-target="#operacionManual2" >
                                                        <i class="fa fa-sign-in fa-lg"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ./box-body -->
            <div *ngIf="permissions.list" class="box-footer with-border">
                <div *ngIf="dataList.page && dataList.page.length > 1 && dataList.count > 0" class="btn-group pull-right">
                    <button (click)="loadData(max*(val-1))" *ngFor="let val of dataList.page" type="button"
                            class="btn btn-default">
                        {{val}}
                    </button>
                </div>
            </div>
        </div>
    </section>
</div>
<operacion-save idModal="operacionManual2" [rules]="rulesSave" [inAnt]="dataOperation" (save)="liberar($event)"> </operacion-save>
