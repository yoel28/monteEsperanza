<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h2>
            Taquilla
        </h2>
    </section>
    <section class="box-body">
        <div class="row col-lg-6 col-lg-offset-3 col-md-6 col-sm-12 col-xs-12 padding-bottom">
            <form role="form" (submit)="getCompanies(findCompany.value)">
                <div class="input-group input-group-sm">
                    <input  #findCompany type="text" class="form-control" placeholder="Ingrese el RUC del cliente" value="{{search}}">
                    <span class="input-group-btn">
                        <button (click)="getCompanies(findCompany.value)" type="button" class="btn btn-info btn-flat">
                            <i class="fa fa-search"></i>
                        </button>
                    </span>
                </div>
            </form>
        </div>
        <div *ngIf="!myglobal.existsPermission('80')" class="col-lg-12">
            <div class="btn-red padding-error">
                <h5><i class="fa fa-warning"></i>&nbsp;<strong>ADVERTENCIA</strong></h5>
                No tiene permisos para listar los clientes
            </div>
        </div>

        <div *ngIf="dataCompanies.count && myglobal.existsPermission('80')" class="row col-lg-10 col-lg-offset-1">
            <table class="table table-hover">
                <tbody>
                <tr *ngFor="let company of dataCompanies.list" (click)="getCompany(company.id)">
                    <td>
                            <img src="{{company.image?company.image:'/assets/img/company-guest.png'}}"
                                 style="display: inline-block" class="img-responsive img-find pull-left">
                            <strong>&nbsp;Nombre:</strong>&nbsp;{{company.title}}
                            <strong>&nbsp;RUC:</strong>&nbsp;{{company.detail}}
                    </td>
                </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td>
                            <div *ngIf="dataCompanies.page && dataCompanies.page.length > 1 && dataCompanies.count > 0" class="btn-group pull-right">
                                <button (click)="getCompanies(findCompany.value,max*(val-1))" *ngFor="let val of dataCompanies.page" type="button" class="btn btn-default">
                                    {{val}}
                                </button>
                            </div>
                        </td>
                    </tr>
                </tfoot>

            </table>

        </div>

        <div *ngIf="dataCompany?.id">
            <div class="row col-lg-12">
                <div class="panel">
                    <div class="panel-body">
                        <div class="profile col-lg-2">
                            <div style="margin-bottom: 15px" class="row">
                                <figure>
                                    <img src="{{dataCompany.image || '/assets/img/company-guest.png'}}" alt=""
                                         style="display: inline-block" class="img-responsive img-bordered">
                                </figure>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <table class="table table-hover">
                                <thead>
                                <tr>
                                    <th>CLIENTE</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td>{{dataCompany.name}}</td>
                                </tr>
                                <tr>
                                    <td><strong>RUC: </strong>{{dataCompany.ruc}}</td>
                                </tr>
                                <tr>
                                    <td><strong>DIRECCI&Oacute;N:</strong> {{dataCompany.address}}</td>
                                </tr>
                                <tr>
                                    <td><strong>TEL&Eacute;FONO:</strong>{{dataCompany.phone}}</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="col-lg-4">
                            <table class="table table-hover">
                                <thead>
                                <tr>
                                    <th>DETALLE</th>
                                </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>TIPO: </strong>
                                            <i class="{{dataCompany.companyTypeIcon}}"></i>
                                            {{dataCompany.companyTypeTitle}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>RESPONSABLE: </strong>
                                            {{dataCompany.responsiblePerson}}
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><strong>VEHICULOS REGISTRADO: </strong>
                                            {{dataCompany.vehiclesCount}}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div><!--Fin de Datos de  camion-->
                    <div *ngIf="myglobal.existsPermission('109')">
                        <table class="table table-hover table-bordered">

                            <thead>
                            <tr>
                                <th>Fecha Efectiva</th>
                                <th>Referencia</th>
                                <th>Fecha de Transacci&oacute;n</th>
                                <th>Tipo</th>
                                <th>Peso</th>
                                <th>Monto</th>
                            </tr>
                            </thead>
                            <tbody *ngFor="let recharges of dataList.list">
                            <tr>
                                <td>{{recharges.dateCreated}}</td>
                                <td>{{recharges.reference}}</td>
                                <td>{{recharges.referenceDate | fecha | date:'dd-MM-yyyy'}}</td>
                                <td>
                                    <i class="{{recharges.rechargeTypeIcon}}"> {{recharges.rechargeTypeTitle}}</i>
                                </td>
                                <td>{{recharges.weight}}</td>
                                <td>{{recharges.quantity}}</td>
                            </tr>
                            </tbody>
                            <tfoot>
                            <tr>
                                <td colspan="7">
                                    <div *ngIf="dataList.count==0" class="norecharges">
                                        No tiene recargas asociadas
                                    </div>
                                    <div *ngIf="dataList.count>0" class="btn-group pull-right">
                                        <button (click)="loadData(max*(val-1))" *ngFor="let val of dataList.page" type="button" class="btn btn-default">
                                            {{val}}
                                        </button>
                                    </div>
                                </td>
                            </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div *ngIf="!myglobal.existsPermission('109')">
                        <div class="btn-red padding-error">
                            <h5><i class="fa fa-warning"></i>&nbsp;<strong>ADVERTENCIA</strong></h5>
                            No tiene permisos para listar las recargas
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <h3>M&eacute;todos de recarga disponibles:</h3>
                            <div class="btn-group">
                                <img src="assets/img/credit/american-express.png" class="img-responsive btn" alt="">
                                <img src="assets/img/credit/cirrus.png" class="img-responsive btn" alt="">
                                <img src="assets/img/credit/mastercard.png" class="img-responsive btn" alt="">
                                <img src="assets/img/credit/maestro.png" class="img-responsive btn" alt="">
                                <img src="assets/img/credit/visa.png" class="img-responsive btn" alt="">
                            </div>

                        </div>
                        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                            <h3>Estado de cuenta</h3>
                            <table class="table table-hover">
                                <tbody>
                                <tr>
                                    <td><strong>Saldo M&iacute;nimo: </strong></td>
                                    <td>{{dataCompany.minBalance}}</td>
                                </tr>
                                <tr>
                                    <td><strong>Saldo Actual: </strong></td>
                                    <td>{{dataCompany.balance}}</td>
                                </tr>
                                </tbody>
                            </table>
                            <div class="row pull-right">
                                <button type="button" class="btn  btn-blue">
                                    <i class="fa  fa-download fa-lg"></i> Generar PDF
                                </button>
                                <button type="button" class="btn  btn-success" data-toggle="modal" data-target="#saveRecarga"
                                        *ngIf="myglobal.existsPermission('111')">
                                    <i class="fa  fa-money fa-lg"></i> Recargar Saldo
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="myglobal.existsPermission('111')">
                <recarga-save  idModal="saveRecarga" [idCompany]="dataCompany.id" (save)="assignRecarga($event)"> </recarga-save>
            </div>
        </div>
    </section>
</div>
